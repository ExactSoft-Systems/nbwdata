@use 'uswds' as *;
@use 'nbw-custom-mixins' as *;
@use 'nbw-custom-definitions' as *;

main {
  &.main-content {
    .paragraph {
      &.format--float-right-33 {
        float: right;
        margin: 0 0 1rem 2%; 
        width: 31%;
        clear: right;
        display: block;
        text-align: left;
      }

      &.format--float-left-33 {
        float: left;
        clear: left;
        margin: 0 2% 1rem 0; 
        width: 31%;
        display: block;
        text-align: left;
      }

      &.format--right-column {
        float: right;
        margin: 0 0 1rem 2%; 
        width: 48%;
        clear: right;
        display: block;
        box-sizing: border-box;
      }

      &.format--left-column {
        float: left;
        clear: left;
        margin: 0 2% 1rem 0; 
        width: 48%;
        display: block;
        box-sizing: border-box;
      }

      &.format--full-width {
        clear: both;
        display: block;
        margin: 0 0 1rem 0;
        width: 100%;
      }

      &.paragraph--type--slide {
        width: 100%;
        height: 35rem;
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center center;
        overflow: hidden;

        .slide-callout {

          .slide-callout-content {
            background-color: rgba(255, 255, 255, .9);
            color: color('primary');
            padding: 2rem 3rem 1rem 3rem;
            text-align: center;
            position: absolute;
            bottom: 4rem;
            width: 100%;
            max-width: 87.5rem;

            h3 {
              font-size: 2rem;
              margin: 0;
              text-transform: none;
            }

            .caption {
              font-size: 1.25rem;
              line-height: 2rem;
              margin: 0;
              font-weight: font-weight('normal');
            }

            .slide-cta-col {
              display: flex;
              justify-content: right;
              padding: 1rem 1rem 0 0;

              img {
                width: 3rem;
                height: 3rem;
                border: 1px solid color('primary');
                border-radius: 50%;
                background-color: $nbw-slide-bg-color;

                &:hover {
                  background-color: color('primary-lighter');
                }
              }
            }
          }
        }
      }

      &.paragraph--type--title-with-simple-text-list-10 {
        border-bottom: 1px solid color('primary');
        border-top: 1px solid color('primary');
        padding: 2rem 0 1rem 0;
        text-align: center;

        .field {
          &.field--name-field-simple-text-title {
            color: color('secondary');
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 2rem;
            text-transform: uppercase;
          }

          &.field--name-field-simple-title-list {
            color: color('primary');
            font-size: 1.75rem;
            font-weight: 800;
            line-height: 175%;

            p {
              margin: 0;
              padding: 0;
            }
          }
        }
      }

      &.paragraph--type--solution {
        margin: 3rem 0 0 0;

        h3 {
          &.title {
            color: color('ink');
            font-size: 1.25rem;
            font-weight: 1000;
            line-height: 100%;
            text-transform: capitalize;
          }
        }

        .solution-item {
          margin-bottom: 3rem;

          h3 {
            margin-bottom: 0;
          }
        }        
      }

      &.paragraph--type--small-advertisements {
        margin-bottom: 3rem;

        .usa-card__container {
          &.small-box {
            background-color: color('primary-lightest');
            border-radius: 0;
            border-width: 0;
            margin: 0;
            text-align: center;

            .usa-card__header {
              h3 {
                color: color('ink');
                line-height: 100%;
                text-transform: none;
              }
            }

            .usa-card__body {
              min-height: 15rem;
            }

            .usa-card__footer {
              a {
                line-height: 100%;
                width: 100%;
              }
            }
          }
        }
      }

      &.paragraph--type--hero-image-ad {
        height: 16rem;
        margin-bottom: 3rem;

        .hero-box-advertisement {
          background-size: cover;
          background-position: center center;
          background-repeat: no-repeat;
          height: 16rem;
          position: relative;

          .text {
            background-color: color('primary');
            color: color('white');
            font-size: 80%;
            left: 0;
            padding: 1rem;
            position: absolute;
            top: 8rem;

            a {
              color: color('white');
              text-decoration: underline;
            }
          }
        }

        .slick-dots {
          bottom: 1rem;

          li {
            button {
              height: 1rem;
              width: 1rem;

              &::before {
                color: color('white');
                font-size: 1rem;
              }
            }

            &.slick-active {
              button {
                &::before {
                  color: color('secondary-vivid');
                }
              }
            }
          }
        }
      }
    }

    section {
      padding: 3.5rem 0;

      h2 {
        font-size: 1.5rem;
        color: color('primary');
        line-height: 100%;
        margin: 0;
        text-transform: none;
      }

      &.paragraph--masonry-card-group {
        padding: 1rem 0;

        .grid-container-widescreen {
          padding-left: 0;
          padding-right: 0;

          .grid-row {
            width: 100%;
          }
        }

        h3 {
          &.masonry-title {
            font-size: 1.25rem;
            margin: -2rem auto 3rem auto;
            text-align: center;
          }
        }

        .card-row {
          &.card-row--secondary {
            margin-top: 2.5rem; 

            .card-col {
              &.card-col--secondary {
                .usa-card__container {
                  .usa-card__default {
                    .usa-card__footer {
                      height: 100%;

                      .grid-row {
                        .text-col {
                          height: 7rem;
                          width: 100%;
                        }
                        
                        .cta-col {
                          align-items: flex-end;
                          height: 5rem;
                          width: 100%;
                        }
                      }
                    }
                  }

                  .usa-card__rollover {
                    .usa-card__body {
                      height: 9rem;
                    }

                    .usa-card__footer {
                      height: 3rem;
                    }
                  }
                }
              }
            }
          }

          .card-col {
            &.card-col--primary {
              height: 21rem;
            }

            &.card-col--secondary {
              height: 16rem;
            }

            .usa-card__container {
              border-radius: 0;
              border-width: 0;            
              overflow: hidden;

              .usa-card__default {
                background-color: color('primary');
                height: 100%;
                position: relative;

                .usa-card__default-image-bg {
                  background-position: center center;  
                  background-repeat: no-repeat;
                  background-size: cover;  
                  height: 100%;
                  width: 100%;
                }

                .usa-card__footer {
                  background: rgba(29, 66, 138, .9);
                  bottom: 0;
                  height: 35%;
                  left: 0;
                  padding: 2rem 1.5rem;
                  position: absolute;
                  width: 100%;

                  .grid-row {
                    align-items: center;

                    .text-col {
                      align-items: center;

                      h3 {
                        font-size: 1.5rem;
                        font-weight: 500;
                        text-transform: none;
                        margin: 0;
                      }
                    }

                    .cta-col {
                      display: flex;
                      justify-content: right;
                      padding: 0;

                      a {
                        &.card-cta {
                          width: 3rem;
                          height: 3rem;
                          border: 1px solid color('primary-light');
                          border-radius: 50%;
                          background-color: transparent;

                          img {                      
                            @include nbw-svg-black-to-primary-vivid;
                            height: 100%;
                            width: 100%;
                          }

                          &:hover {
                            border: 1px solid color('white');

                            img {                      
                              @include nbw-svg-black-to-white;
                            }
                          }
                        }
                      }
                    }
                  }
                }

                h3 {
                  color: color('white');
                }
              }

              .usa-card__rollover {
                background-color: color('secondary');
                height: 100%;
                position: relative;

                .usa-card__rollover-image-bg {
                  background-position: center center;  
                  background-repeat: no-repeat;
                  background-size: cover;  
                  height: 100%;
                  opacity: .1;
                  width: 100%;
                }

                .usa-card__rollover-content {
                  height: 100%;
                  left: 0;
                  opacity: 1;
                  position: absolute;
                  top: 0;
                  width: 100%;
                  z-index: 1000;

                  .usa-card__body {
                    align-items: flex-end;
                    color: color('white');
                    display: flex;
                    font-size: 1.25rem;
                    height: 65%;
                    line-height: 1.5rem;
                    padding: 0 2rem;
                  }

                  .usa-card__footer {
                    height: 35%;
                    padding: 2rem 1.5rem 2rem 2rem;

                    .grid-row {
                      align-items: center;

                      .text-col {
                        align-items: center;
                      }

                      .cta-col {
                        display: flex;
                        justify-content: right;
                        padding: 0;

                        a {
                          &.card-cta {
                            width: 3rem;
                            height: 3rem;
                            border: 1px solid color('white');
                            border-radius: 50%;
                            background-color: transparent;

                            img {                      
                              @include nbw-svg-black-to-white;
                              height: 100%;
                              width: 100%;
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }

      &.paragraph--title-image-description {
        background-color: color('white');

        .image-col {
          img {
            max-width: 100%;
            width: 100%;
            height: auto;
            object-fit: cover;
          }
        }

        .content-col {
          font-size: 1.25rem;
          line-height: 1.75rem;

          p {
            margin-top: 0;
            font-size: 1.25rem;
            line-height: 1.75rem;
          }
        }
      }

      &.paragraph--title-icon-link {
        @include nbw-gradient-secondary-horizontal;

        h2 {
          color: color('white');
          text-transform: none;
        }

        .icon-row {
          margin: 1rem 0 2rem 8rem;

          .icon-col {
            text-align: center;
            color: color('white');
            border-right: 2px solid rgba(255, 255, 255, .5);

            &:last-child {
              border-right: unset;
            }

            .icon {
              margin-bottom: 1rem;

              img {
                max-height: 3rem;
                height: 3rem;
                width: auto;
              }
            }

            h3 {
              color: color('white');
              font-size: 1.75rem;
              line-height: 125%;
              margin: 0 0 1.5rem 0;
              text-transform: uppercase;
            }

            h4 {
              border-bottom: 2px solid rgba(255, 255, 255, .8);
              color: color('white');
              font-size: 3.25rem;
              font-weight: font-weight('bold');
              line-height: 100%;
              margin: 1rem;
              padding: 0 0 1rem 0;
              text-transform: none;
            }

            h5 {
              color: color('white');
              text-transform: uppercase;
              font-weight: font-weight('bold');
              font-size: 1.25rem;
              line-height: 125%;
              margin: 0;
            }
          }
        }

        .cta {
          display: flex;
          justify-content: center;
        }
      }

      &.paragraph--card-group {
        background-color: color('primary');

        h2 {
          color: color('white');
          margin-bottom: 2rem;
          text-transform: none;
        }

        .usa-card__container {
          border-radius: 0;
          border-width: 0;
          height: 26rem;
          overflow: hidden;

          .cta-col {
            display: flex;
            justify-content: right;
            padding: 0;

            .card-cta {
              img {
                width: 3rem;
                height: 3rem;
                border: 1px solid color('primary');
                border-radius: 50%;
                background-color: color('white');

                &:hover {
                  background-color: color('primary-lighter');
                }
              }
            }
          }

          .usa-card__default {
            .usa-card__media {
              height: 20rem;
              overflow: hidden;

              .usa-card__img {
                border-radius: 0;
                height: 100%;
                overflow: hidden;
              }
            }

            .usa-card__footer {
              height: 6rem;
              overflow: hidden;
              padding: 1.5rem 1rem;

              .grid-row {
                .text-col {
                  display: flex;
                  align-items: center;

                  h3 {
                    color: color('primary');
                    text-transform: none;
                    font-size: 1.5rem;
                    line-height: 1.5rem;
                    margin: 0;
                  }
                }
              }
            }
          }

          .usa-card__rollover {
            display: none;

            .usa-card__media {
              height: 12rem;
              overflow: hidden;

              .usa-card__img {
                border-radius: 0;
                height: 100%;
                overflow: hidden;
              }
            }

            .usa-card__body {
              color: color('primary');
              height: 8rem;
              overflow: hidden;
              padding: 2rem 2rem 0 2rem;
            }

            .usa-card__footer {
              height: 6rem;
              overflow: hidden;
              padding: 1.5rem 1rem;
            }
          }
        }
      }

      &.paragraph--three-column-listings {
        h2 {
          margin-bottom: 2rem;
          text-transform: none;
        }

        .usa-card__container {
          border: 1px solid color('base-dark');
          border-radius: 0;

          .usa-card__header {
            padding: .75rem 1rem .5rem 1rem;
            @include nbw-gradient-primary-horizontal;

            h3 {
              color: color('white');
              text-transform: none;
              font-size: 1.75rem;
              line-height: 1.75rem;
              margin: 0;
              padding: 0;
            }
          }

          .usa-card__media {
            height: 15rem;

            .usa-card__img {
              border-radius: unset;
              height: 15rem;
            }
          }

          .usa-card__body {
            color: color('primary');
            padding-bottom: 1rem;

            .item {
              .pill-row {
                margin: 1.5rem 0 1rem -1rem;

                .pill {
                  background-color: color('base');
                  border-radius: 4rem;
                  font-size: 1rem;
                  padding: .125rem .75rem;
                  text-transform: uppercase;
                }
              }

              .text-row {
                .text-col {
                  font-size: 1.25rem;
                  line-height: 1.75rem;
                  border-bottom: 1px solid color('base-dark');
                  padding-bottom: 1rem;
                }

                .cta-col {
                  display: flex;
                  justify-content: right;
                  padding: 0 0 1rem 0;

                  .card-cta {
                    img {
                      width: 3rem;
                      height: 3rem;
                      border: 1px solid color('primary');
                      border-radius: 50%;
                      background-color: color('white');

                      &:hover {
                        background-color: color('primary-lighter');
                      }
                    }
                  }
                }
              }
            }
          }

          .usa-card__footer {
            text-align: center;

            .usa-button {
              @include nbw-button;
              padding: .5rem 2rem;
              width: unset;
            }
          }
        }
      }
    }

    .slick {
      &.slick--field-slides {
        .slick-dots {
          position: absolute;
          bottom: 1rem;

          li {
            button {
              &::before {
                color: color('white');
                opacity: 1;
                font-size: 1rem;
              }
            }

            &.slick-active {
              button {
                &::before {
                  color: color('secondary-vivid');
                }
              }
            }
          }
        }
      }
    }

    &.node-type--configurable_page {
      section {
        &.paragraph--card-group {
          background-color: unset;

          h2 {
            color: color('primary');
          }

          .usa-card__container {
            border: 2px solid color('primary');

            .usa-card__default {
              .usa-card__footer {
                background-color: color('primary');

                .grid-row {
                  .text-col {
                    h3 {
                      color: color('white');
                    }
                  }
                }
              }
            }

            .usa-card__rollover {
              background-color: color('primary');

              .usa-card__body {
                color: color('white');
              }
            }
          }
        }
      }
    }
  }
}

/* hack for masonry sm desktop */
@media (min-width: 1024px) and (max-width: 1399px) {
  main {
    &.main-content {
      section {
        &.paragraph--masonry-card-group {
          .card-row {
            .card-col {              
              .usa-card__container {
                .usa-card__default {
                  .usa-card__footer {
                    padding: 1.5rem 1rem;

                    .grid-row {
                      .text-col {
                        h3 {
                          font-size: 1.125rem;
                          line-height: 100%;
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

@include at-media-max('desktop') {
  main {
    &.main-content {
      .paragraph {
        &.paragraph--type--slide {
          width: 100%;
          height: 35rem;
          background-size: cover;
          background-repeat: no-repeat;
          background-position: center center;
          overflow: hidden;

          .slide-callout {
            .slide-callout-content {
              padding: 1rem;
              text-align: center;
              position: absolute;
              bottom: 3.5rem;
              width: 96%;
              max-width: 100%;

              h3 {
                font-size: 2rem;
                margin: 0;
                text-transform: none;
              }

              .caption {
                font-size: 1rem;
                line-height: 1.5rem;
                margin: 0;
              }

              .slide-cta-col {
                display: flex;
                justify-content: center;
                padding: 1rem 1rem 0 0;
              }
            }
          }
        }
      }

      section {
        h2 {
          font-size: 2.5rem;
          margin-bottom: 1.5rem;
          text-align: center;
        }

        .grid-container-widescreen {
          padding-left: 0;
          padding-right: 0;
        }

        &.paragraph--masonry-card-group {
          .card-row {
            &.card-row--secondary {
              margin-top: 0;
            }

            .card-col {
              margin-bottom: 1.5rem;
              
              .usa-card__container {
                .usa-card__default {
                  .usa-card__footer {
                    .grid-row {
                      .text-col {
                        h3 {
                          font-size: 1.125rem;
                          line-height: 100%;
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }

        &.paragraph--title-image-description {
          .image-col {
            display: none;
          }

          .content-col {
            padding: 0 2rem;
          }
        }

        &.paragraph--title-icon-link {
          @include nbw-gradient-secondary-vertical;

          .icon-row {
            margin: 1rem 1rem 2rem 1rem;

            .icon-col {
              border-bottom-width: 0;
              margin-bottom: 3rem;

              &:last-child {
                margin-bottom: 0;
              }

              h3 {
                font-size: 1.25rem;
                margin: 0 0 1rem 0;
              }

              h4 {
                font-size: group_field_names;
                margin: 0 20% 1.5rem 20%;
                padding: 0 0 1rem 0;
                text-transform: uppercase;
              }

              h5 {
                font-size: 1rem;
                padding: 0 20%;
              }
            }
          }
        }

        &.paragraph--card-group {
          .usa-card__container {
            margin: 0 3rem 2rem 3rem;
          }
        }

        &.paragraph--three-column-listings {
          padding-bottom: 0;

          .grid-row {
            .grid-col-12 {
              margin-bottom: 0;
            }
          }

          .item {
            .grid-row {
              .grid-col-12 {
                margin-bottom: 2rem;
              }
            }
          }

          .usa-card__container {
            border-width: 0;
            margin: 0;

            .usa-card__header {
              padding: .75rem 2rem;
            }

            .usa-card__media {
              display: none;
            }

            .usa-card__body {
              padding: .75rem 2rem;

              .item {
                .pill-row {
                  margin: 1.5rem 0 -1rem -1rem;
                }
              }
            }
          }
        }
      }
    }
  }
}

@include at-media-max('tablet') {
  main {
    &.main-content {
      section {
        &.paragraph--three-column-listings {
          .usa-card__container {
            .usa-card__footer {
              .usa-button {
                font-weight: 400;
                font-size: 1.5rem;
                line-height: 1.5rem;
              }
            }
          }
        }
      }

      .paragraph {
        &.format--float-right-33 {
          float: none;
          margin: 0 0 1rem 0; 
          width: 100%;
          clear: none;
        }

        &.format--float-left-33 {
          float: none;
          margin: 0 0 1rem 0; 
          width: 100%;
          clear: none;
        }

        &.format--right-column {
          float: none;
          margin: 0 0 1rem 0; 
          width: 100%;
          clear: none;
        }

        &.format--left-column {
          float: none;
          margin: 0 0 1rem 0; 
          width: 100%;
          clear: none;
        }

        &.paragraph--type--slide {
          .slide-callout {
            .slide-callout-content {
              width: 92%;
            }
          }
        }

        &.paragraph--type--small-advertisements {
          .box-col {
            margin-bottom: 1rem;
          }
        }
      }
    }
  }
}

.node-type--finance_option_landing_page {
  .field--name-field-fo-description {
    > .multiple {
      > .field__item:not(:first-child) {
        margin-top: 3rem;
      }
    }
  }

  .paragraph:not(.paragraph--type--financing-option-header) {
    h2 {
      @include arrow-header;
      @include arrow-header-green;

      @include at-media-max('desktop') {
        max-width: 90%;
      }

      .field--name-field-title {
        margin: 0;
      }
    }
  }

  .financing-chart {
    .views-field .attribute-val {
      width: 180px;
      .attribute-text {
        width: 100%;
      }
    }

    &.two-results-financing-chart-columns {
      .views-field .attribute-val {
        width: 20vw;
      } 
    }
    
    &.one-result-financing-chart-columns {
      thead {
        display: none;
      }
      .views-field .attribute-val {
        width: 40vw;
      }
    }
  }
}

.paragraph--type--financing-option-advantages {
  .field--name-field-fo-advantages > .multiple > .field__item:not(:first-child) {
    margin-top: 2rem;
  }

  .paragraph--type--financing-option-advantages-item {
    .grid-col-auto {
      max-width: 90%;
    }

    &.pro .field--name-field-title {
      color: color('secondary');
    }

    &.con .field--name-field-title {
      color: #d83933;
    }

    .field--name-field-title {
      margin-bottom: 0;
      font-weight: 800;
    }
    
    .field--name-field-fo-advantages-type {
      margin: 0;
    }

    .field--name-field-description {
      margin-top: 0;

      p {
        margin-top: 0;
        margin-left: 2rem;
      }
    }
  }
}
.paragraph--type--financing-option-case-studies {
  .grid-col-2 {
    width: 12%;
  }

  .field--type-image {
    img {
      height: initial;
    }
  }

  .grid-row:not(:last-child) {
    padding-bottom: 2rem;
  }
}

.paragraph--type--financing-option-header {
  .overlay {
    position: relative;
    @include at-media-max('desktop') {
      &.grid-col-3 {
        width: 100%;
      }
    }
  }
  & > div.grid-row.grid-gap > .grid-col-8 {
    @include at-media-max('desktop') {
      width: 100%;
    }
  }
  
  .field--name-field {
    &-title {
      background: rgba(255,255,255,0.85);
      font-size: 30px;
      line-height: 35px;
      padding: 5px 10px;
      position: absolute;
      top: 30px;
      margin: 0;
      width: 56%;
      min-width: min-content;
      font-weight: 900;
      color: color('primary');
    }
    
    &-fo-header-description{
      a {
        color: color('secondary');
      }
    }

    &-image {
      img {
        height: initial;
        @include at-media-max('desktop') {
          width: 100%;
        }
      }
    }
  }
}


.grid-col-2 {
  .field--name-field-marketing-image {
    img {
      height: initial;
    }
  }
}


.field--name-field-paragraph {
  .paragraph--type--subscribe {
    padding: $nbw-top-and-bottom-spacer;
  }

  .field__item:has(.paragraph--type--subscribe) + .field__item:has(.paragraph--type--subscribe) {
    border-top: 1px solid color('base-darker');
  }
}